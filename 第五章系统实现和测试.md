## 第五章系统实现和测试

### 1.系统环境

操作系统：支持Windows和Linux跨平台,生产环境采用Docker容器化部署，基础镜像依赖于CentOS

Java版本：1.8

SpringBoot版本：2.4.3

Vue版本：2.0

ElementUI版本：3.26.0

数据库版本：Mysql5.7.17，Redis7.0.4

RabbitMQ版本:3.8.34

Docker版本: 20.10.17

ElasticSearch版本: 7.14.0

### 2.  系统实现

系统首页如图2-1所示。点击进入功能按钮，进入系统内部功能页面。进入功能页面后，系统首先会检测用户是否登录，若用户未登录，则出现“您尚未登录，可能会影响功能使用”的提醒框。用户需点击右上角登录与注册按钮，然后弹出选项卡如图2-2所示，进行登录或注册。

#### 2.1 教授申请实现

普通咨询者注册成功进入系统之后，可以点击咨询下的”点此申请“成为志愿教授，申请成为志愿教授需要提供身份证号和个人简历，以便管理员审核个人资历。

在管理员进行审核通过之后，用户会收到消息提示，并且身份切换为教授，教授具有咨询者的所有功能。在咨询者的基础上，教授额外拥有接收提问以及回答问题的功能。

点击问答中心，可以查看到所有对自己的提问以及自己的所有回答，如下图

![问答中心]()

#### 2.2 咨询实现

普通咨询者进入系统之后，可以根据不同的咨询领域查看不同领域的志愿教授，并且进行提问，例如查询计算机领域Java编程相关方面的教授，点击咨询按钮可以向教授发起提问，然后可以收到教授的回答。用户也可以预约咨询时间，教授会收到咨询时间的消息。教授同意咨询之后，用户可以在指定时间与教授发起私聊，进行在线咨询。

私聊效果如下图

![私聊]()

#### 2.3 系统资讯实现

普通咨询者可以在资讯版权，看到系统收集的各个领域的行业咨询，例如出国留学的国家新规，计算机领域的核心课程，目标高校的录取分数线等等行业资讯。

管理员可以在后台维护资讯信息，对于过期信息可以进行归档或者删除，对于新信息，可以编写并且上线。

#### 2.4 咨询领域实现

咨询领域用于对问题以及教授资源进行分类，如国内教育咨询,出国留学，大学课程，生活常识，等等类别，可以动态进行维护，总体而言，咨询领域的实现基于一个树形结构，也是大类下有中类，中类下还有小类。以"编译器设计"这个类别距离，这个领域可以添加到 大学-工学-计算机-编译原理的类别下。

咨询者在第一次进入系统，系统会提示其选择感兴趣的领域，用于针对性推荐可能感兴趣的问题，进行经典问答推荐，实现推荐的算法主要基于协同过滤

此外，咨询领域还用于对教授进行分类，区分不同领域的教授，使得咨询者可以针对性的对不同领域的教授针对性进行提问或者对于交叉学科进行联合提问

#### 2.5 提问回答实现

除了在线咨询之外，普通咨询者可以在问答中心发布问题，如下图

通过添加问题详情，描述，指定咨询领域以及提问的目标教授，即可以发布问题。发布的问题首先会进入审核状态，管理员后台有专门的审核员进行问答的审核 这个板块在后文的管理员模块进行介绍。在审核通过后，教授可以收到提问消息，收到的提问消息如下图

![图片暂无]()

也可以选择问题进行回答。同样，教授发布的回答也要先经过管理员审核，随后才会进入问答搜索版块。

#### 2.6 问答搜索实现

问答的搜索主要采用ElasticSearch(以下简称ES)搜索引擎实现，系统将一个问题以及所属的回答包含的主要字段作为一条索引存储到ES当中，利用ES提供的api可以很方便的进行模糊，全文，多条件索引查询，搜索界面如下图

![图片暂无]()

另外，索引与数据库之间的同步问题也是系统设计的一个难点，本系统主要采用的是先更新数据库，再删除索引的策略来更新索引内容

#### 2.7 短信验证码实现

用户在登录，注册，修改密码的时候都需要用到短信服务，如下图

![图片暂无]()

本系统主要采用的是阿里云的短信测试服务（测试使用)，短信的发送过程如下：项目的mail模块订阅短信发布消息队列，并且通过阿里云的SDK连接到短信发送服务。当消息队列中出现新的短信发送内容，就解析队列信息，通过阿里云的SDK包生成新信息进行发送。

#### 2.8 系统资讯实现

系统在首页提供了资讯模块，用于向用户展示各个行业的热门资讯，例如考研信息，国外名校招生信息，录取分数线，行业发展新规等等

如下图

![图片暂无]()

这些内容主要由后台资讯管理员进行发布，主要包含资讯图片，资讯内容，资讯来源三个主要部分。

#### 2.9 个人主页实现

用户可以个人主页更新和绑定自己的个人信息，如修改昵称，绑定手机号，绑定邮箱，更换头像，兴趣标识维护(主要用于推荐经典问答),个人简历维护等。其中其他的个人信息主要是单项数据，而个人简历涉及到多项信息，需要进入专门的页面填写。

### 3.系统测试

#### 3.1 功能测试

软件测试是软件开发中必不可少的环节，为保障系统运行时的高可靠性和准确性，需要进行一系列测试来判断系统是否有效满足功能性需求和非功能性需求，并对测试过程中出现的漏洞进行及时的修复，最终保障软件以高质量平稳运行。

软件测试方法主要分为黑盒测试和白盒测试。黑盒测试从用户角度出发，主要是针对软件各项功能的测试。白盒测试是指在了解软件内部结构情况下，对全部逻辑路径进行测试。

本文采用黑盒测试的方法，对系统各大功能模块进行测试。

| 测试内容               | 测试流程                                                     | 期望结果                                                     | 实际结果       |
| ---------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------- |
| 填写简历信息           | 普通用户点击申请教授资格按钮后如果没有在线简历记录，则会自动进入简历维护界面，或者点击个人中心的在线简历模块进行维护 | 填写完成后点击确认可以保存并且查看,管理员可以对简历内容进行审核，用于是否授予志愿教授资格的参考。 | 与期望结果一致 |
| 申请教授资格           | 普通用户注册后进入主界面，点击成为教授申请教授资格，提交简历信息后点击确认申请按钮 | 返回申请成功的提示，并且管理员后台可以查询到等待审核的教授   | 与期望结果一致 |
| 用户发起咨询           | 用户通过查询到需要咨询的教授后，点击咨询按钮，输入聊天信息点击发送 | 教授点击消息提示的私聊消息列表，可以获取到咨询的消息         | 与期望结果一致 |
| 用户发布问题对教授提问 | 普通用户点击主界面搜索框右边的提问按钮发起提问，输入提问的标题以及问题描述，选择请求回答的教授，选择问题领域，点击确认发布问题 | 发布问题后，用户可以在我的问答版块查询到发布的问题，管理员可以在问答审核模块查询到发布的问题并且审核，教授可以收到提问的消息，并且在问题下发布回答 | 与期望结果一致 |
| 个人信息填写           | 用户在个人主页对个人信息进行维护，修改昵称，真名，绑定手机号，邮箱,身份证号，性别 | 个人信息修改成功                                             | 与期望结果一致 |
| 根据关键词搜索问答     | 用户在主界面的搜索栏输入搜索关键词，然后点击搜索按钮,搜索支持中文分词 | 出现与关键词关联问答内容，并且中文分词支持，例如搜索"番茄酱"，可以检索到"番茄"的相关词条 | 与期望结果一致 |
| 查看系统资讯           | 用户在主界面首页点击资讯按钮，可以跳转到资讯页面             | 出现系统公布的业内资讯                                       | 与期望结果一致 |
| 获取短信验证码         | 用户在注册或者修改密码时，点击获取验证码按钮，可以收到手机验证码 | 点击按钮后手机收取到验证码                                   | 与期望结果一致 |
| 获取邮箱验证码         | 用户在注册时，点击获取验证码按钮，可以收到邮箱验证码         | 点击按钮后邮箱收取到验证码                                   | 与期望结果一致 |
| 收取系统消息           | 用户在登录后可以在右上角的铃铛图标处查看到自己的未读以及已读消息，点击图标会跳转到消息中心，并且可以分类查看自己的所有消息，包括: 系统消息，私聊消息，互动消息，问答消息 | 点击消息中心按钮可以跳转到消息中心，点击分类消息栏目可以查看到各类消息 | 与期望结果一致 |
| 教授对问题发布回答     | 教授用户可以在消息中心中的邀请回答栏目下看到邀请信息，点击邀请信息中的问题链接可以跳转到问题界面，点击发布回答按钮，填写回答内容后对问题发布回答 | 点击消息中心的邀请回答消息可以跳转到问题界面，点击发布回答按钮可以发布回答，并且提问用户收到回答提醒，管理员后台可以查询到问题以及回答并且进行审核 | 与期望结果一致 |
| 教授修改个人简介       | 教授用户可以在个人主页修改自己的个人简介，用于对外推荐以及向咨询者展示 | 点击个人头像或者个人主页按钮可以跳转到个人主页，在个人简介栏目输入自己的自我介绍保存即可对外显示 | 与期望结果一致 |
| 用户对问题点赞         | 用户可以对问题进行点赞，在问题详情页面顶部的问题描述区域，点击绿色的点赞按钮可以进行点赞，问题的提出者会收到系统点赞消息通知(属于互动消息)，但是只会通知一次 | 点击问题点赞按钮后，点赞状态更改，提出者收到系统消息         | 与期望结果一致 |
| 用户对回答点赞         | 用户可以对回答进行点赞，在问题详情页面顶部的问题回答区域，点击绿色的点赞按钮可以进行点赞，回答的发布者会收到系统点赞消息通知(属于互动消息)，但是只会通知一次 | 点击回答点赞按钮后，点赞状态更改，提出者收到系统消息         | 与期望结果一致 |
| 获取经典问答推荐       | 点击问答中心按钮，下方会自动推荐与设置的爱好相关的经典问答，推荐采用基于用户的协同过滤，也就是关注领域相同的用户的问答会被优先推荐，另外，点赞和收藏更高的问答更容易被推荐 | 点击问答中心，首页出现推荐的经典问答                         | 与期望结果一致 |
| 获取所有的咨询领域     | 在首页的咨询版块，将鼠标悬浮会自动出现所有大类的咨询领域，这些信息主要由后台管理员进行维护 | 鼠标悬浮在咨询按钮，出现咨询领域                             | 与期望结果一致 |
|                        |                                                              |                                                              |                |
|                        |                                                              |                                                              |                |
|                        |                                                              |                                                              |                |
|                        |                                                              |                                                              |                |

